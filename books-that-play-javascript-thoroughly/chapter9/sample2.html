<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>Tone.jsのサンプル</title>
  </head>
  <body>
    
    <button id="btn">開始</button>
    
    <script src="https://tonejs.github.io/build/Tone.js"></script>
    <script>
      
      const btn = document.getElementById('btn');
      const synth = new Tone.Synth().toMaster();
      const melodyLists = ['G3', 'A3', 'G3', 'C4', 'B3', null,'G3', 'A3', 'G3', 'D4', 'C4', null];
      const melody = new Tone.Sequence(toPlay, melodyLists).start();
      
      
      btn.addEventListener('click', function() {
        Tone.Transport.start().stop('3m');
      });
      
      
      function toPlay(time, note) {
          synth.triggerAttackRelease(note, '4n', time);
      }


      /*
      //オブジェクト形式でメロディを細かく制御する方法
      const melodyLists = [
        { time : '0:1:0', note : 'G3', dur : '4n'},
        { time : '0:2:0', note : 'A3', dur : '4n'},
        { time : '0:3:0', note : 'G3', dur : '4n'},
        { time : '0:4:0', note : 'C4', dur : '4n'},
        { time : '1:1:0', note : 'B3', dur : '2n'},
        { time : '1:3:0', note : 'G3', dur : '4n'},
        { time : '1:4:0', note : 'A3', dur : '4n'},
        { time : '2:1:0', note : 'G3', dur : '4n'},
        { time : '2:2:0', note : 'D4', dur : '4n'},
        { time : '2:3:0', note : 'C4', dur : '2n'},
      ];
      
      const part = new Tone.Part(toPlay, melodyLists).start();

      btn.addEventListener('click', function() {
        Tone.Transport.start();
      });

      function toPlay(time, event) {
        synth.triggerAttackRelease(event.note, event.dur, time);
      }
      */

    </script>
    
  </body>
</html>
